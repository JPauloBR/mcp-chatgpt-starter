# AT&T MCP Server Configuration

# Server URL - IMPORTANT: Update this based on your environment
# 
# For local development:
# SERVER_URL=http://localhost:8000
#
# For Cloudflare Tunnel (recommended for ChatGPT):
# SERVER_URL=https://your-subdomain.trycloudflare.com
# Example: SERVER_URL=https://restrictions-duncan-parties-activation.trycloudflare.com
#
# For ngrok (alternative to Cloudflare):
# SERVER_URL=https://your-unique-id.ngrok-free.app
#
# For production deployment:
# SERVER_URL=https://your-production-domain.com
#
# This URL is used to construct asset paths (JS, CSS, images) served to ChatGPT.
# If assets fail to load (404 or ERR_NAME_NOT_RESOLVED), check this value.
SERVER_URL=http://localhost:8000

# Optional: Set log level for debugging
# LOG_LEVEL=INFO

# ==========================================
# OAuth Configuration (Phase 2)
# ==========================================

# Enable OAuth authentication
# Set to 'true' to enable OAuth for ChatGPT Apps SDK
OAUTH_ENABLED=false

# OAuth Provider Type
# Options: custom, google, azure
# - custom: In-memory provider for demo/testing (no external dependencies)
# - google: Google OAuth / OpenID Connect
# - azure: Azure Entra ID (Microsoft Identity Platform)
OAUTH_PROVIDER=custom

# OAuth Issuer URL (your MCP server URL)
# This should match your production domain or tunnel URL
# For local development with tunnel:
# OAUTH_ISSUER_URL=https://att-mcp.jpaulo.io
# For testing with Cloudflare tunnel:
# OAUTH_ISSUER_URL=https://your-subdomain.trycloudflare.com
OAUTH_ISSUER_URL=https://att-mcp.jpaulo.io

# OAuth Scopes (comma-separated)
# Define what permissions can be requested
OAUTH_VALID_SCOPES=read,write,payment,account

# Default scopes granted if none specified
OAUTH_DEFAULT_SCOPES=read

# Token Lifetimes (in seconds)
# Access token (default: 3600 = 1 hour)
OAUTH_ACCESS_TOKEN_TTL=3600
# Refresh token (default: 86400 = 24 hours)
OAUTH_REFRESH_TOKEN_TTL=86400
# Authorization code (default: 600 = 10 minutes)
OAUTH_AUTH_CODE_TTL=600

# ==========================================
# Google OAuth Configuration (if OAUTH_PROVIDER=google)
# ==========================================
# 
# Setup Steps:
# 1. Go to https://console.cloud.google.com/
# 2. Create a project or select existing one
# 3. Enable Google+ API
# 4. Go to "Credentials" → Create OAuth 2.0 Client ID
# 5. Set Application type: Web application
# 6. Add authorized redirect URI: https://att-mcp.jpaulo.io/oauth/google/callback
# 7. Copy Client ID and Client Secret below

# Google OAuth Client ID
#OAUTH_CLIENT_ID=

# Google OAuth Client Secret
#OAUTH_CLIENT_SECRET=

# ==========================================
# Azure Entra ID Configuration (if OAUTH_PROVIDER=azure)
# ==========================================
#
# Setup Steps:
# 1. Go to https://portal.azure.com/
# 2. Navigate to "Azure Active Directory" → "App registrations"
# 3. Click "New registration"
# 4. Set name and supported account types
# 5. Add redirect URI: https://att-mcp.jpaulo.io/oauth/azure/callback
# 6. Go to "Certificates & secrets" → Create client secret
# 7. Go to "API permissions" → Add Microsoft Graph permissions:
#    - User.Read (Delegated)
#    - email, openid, profile (Delegated)
# 8. Copy Application (client) ID, Client Secret, and Tenant ID below

# Azure Application (Client) ID
# OAUTH_CLIENT_ID=12345678-1234-1234-1234-123456789abc

# Azure Client Secret (Value, not Secret ID)
# OAUTH_CLIENT_SECRET=abc~defghijklmnopqrstuvwxyz1234567890

# Azure Tenant ID (optional, defaults to "common" for multi-tenant)
# Options:
# - Specific tenant ID: 12345678-1234-1234-1234-123456789abc
# - "common": Multi-tenant (work, school, and personal Microsoft accounts)
# - "organizations": Multi-tenant (work and school accounts only)
# - "consumers": Personal Microsoft accounts only
# OAUTH_TENANT_ID=common

# ==========================================
# OAuth Endpoints Reference
# ==========================================
#
# When OAuth is enabled, the following endpoints are available:
#
# MCP OAuth Endpoints (auto-generated by MCP library):
# - Authorization: {OAUTH_ISSUER_URL}/authorize
# - Token: {OAUTH_ISSUER_URL}/token
# - Registration: {OAUTH_ISSUER_URL}/register
# - Revocation: {OAUTH_ISSUER_URL}/revoke
# - Metadata: {OAUTH_ISSUER_URL}/.well-known/oauth-authorization-server
#
# Custom Endpoints (for UI and callbacks):
# - Consent Page (custom): {OAUTH_ISSUER_URL}/oauth/authorize/page
# - Consent Page (external): {OAUTH_ISSUER_URL}/oauth/consent/page
# - Google Callback: {OAUTH_ISSUER_URL}/oauth/google/callback
# - Azure Callback: {OAUTH_ISSUER_URL}/oauth/azure/callback
# - Stats (debug): {OAUTH_ISSUER_URL}/oauth/stats
